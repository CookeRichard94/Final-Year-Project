<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
</head>
<body>

    <h1>{{ request.session.cart }}</h1>

    {% if user.username is not none and user.username != '' %}
        <h1> Hello {{ user.username }}</h1>
    {% elif user.username is none %}
        <h5>You are not logged in</h5>
    {% endif %}
    <div>
        <h1>Products</h1>
        {% if user.is_superuser %}
            <a href="{% url 'product_new' %}">Add product</a><br><br>
        {% endif %}
        <table border="1">
            <tr>
{#                <th>ID</th>#}
                <th>Name</th>
                <th>Price</th>
                <th>Size</th>
            </tr>
            <iframe name="foo" style="display: none;"></iframe>
            {% for product in products %}
            <tr>
{#                <td>{{ product.id }}</td>#}
                <td>{{ product.name }}</td>
                <td>{{ product.price }}</td>
                <td>{{ product.size }}</td>
                <td>
                    <a href="{% url 'product_detail' product.id %}">Detail</a>
                    {% if user.is_superuser %}
                        <a href="{% url 'product_edit' product.id %}">Edit</a>
                        <a href="{% url 'product_delete' product.id %}">Delete</a>
                    {% endif %}
                    {% if user.username is not none and user.username != '' %}
                        <form method="post" action="{% url 'cart' %}" target="foo">
                            {% csrf_token %}
                            <input type="hidden" name="product_id" id="product_id" value="{{ product.pk }}">
                            <input type="submit" value="Add to cart">
                        </form>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="4"><b>Data is empty! Please, add data first.</b></td></tr>
            {% endfor %}
        </table>
    </div>
    <div>
        <br><br>
        {% if user.username is none or user.username == '' %}
            <a href="{% url 'login' %}">Login</a>
            <a href="{% url 'register' %}">Register</a>
        {% endif %}
        {% if user.username is not none and user.username != '' %}
            <a href="#" onclick="document.getElementById('logout').submit()">Logout</a>
            <form id="logout" action="{% url 'logout' %}" method="post">{% csrf_token %}</form>
        {% endif %}
    </div>
{#    <div>#}
{#        <h1>Users</h1>#}
{#        <table border="1">#}
{#            <tr>#}
{#                <th>ID</th>#}
{#                <th>Name</th>#}
{#                <th>Price</th>#}
{#                <th>Size</th>#}
{#            </tr>#}
{#            <tr>#}
{#                {% for user in users %}#}
{#                <td>{{ user.id }}</td>#}
{#                <td>{{ user.user.username }}</td>#}
{#            </tr>#}
{#            {% empty %}#}
{#            <tr><td colspan="4"><b>Data is empty! Please, add data first.</b></td></tr>#}
{#            {% endfor %}#}
{#        </table>#}
{#    </div>#}
{#    <div>#}
{#        <h1>My products</h1>#}
{#        <a href="{% url 'product_new' %}">My products</a><br><br>#}
{#        <table border="1">#}
{#            <tr>#}
{#                <th>ID</th>#}
{#                <th>Name</th>#}
{#                <th>Price</th>#}
{#                <th>Size</th>#}
{#            </tr>#}
{#            {% for product in my_object_list %}#}
{#            <tr>#}
{#                <td>{{ product.id }}</td>#}
{#                <td>{{ product.name }}</td>#}
{#                <td>{{ product.price }}</td>#}
{#                <td>{{ product.size }}</td>#}
{#                <td>#}
{#                    <a href="{% url 'product_detail' product.id %}">Detail</a>#}
{#                    <a href="{% url 'product_edit' product.id %}">Edit</a>#}
{#                    <a href="{% url 'product_delete' product.id %}">Delete</a>#}
{#                </td>#}
{#            </tr>#}
{#            {% empty %}#}
{#            <tr><td colspan="4"><b>Data is empty! Please, add data first.</b></td></tr>#}
{#            {% endfor %}#}
{#        </table>#}
{#    </div>#}
</body>
</html>